<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy" content="frame-ancestors 'self' *;">
    <title>实时色温调整 by jackcring.com</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#3B82F6',
                    },
                    fontFamily: {
                        sans: ['Inter', 'system-ui', 'sans-serif'],
                    },
                }
            }
        }
    </script>

    <style type="text/tailwindcss">
        @layer utilities {
            .content-auto {
                content-visibility: auto;
            }
            .slider-thumb {
                @apply appearance-none w-6 h-6 rounded-full bg-red-500 cursor-pointer shadow- transition-all duration-150 hover:scale-110;
            }
            .color-display {
                @apply w-full h-32 rounded-lg transition-all duration-300 ease-in-out shadow-none flex items-center justify-center text-gray-800 font-medium text-lg;
            }
        }
    </style>
</head>

<body class="min-h-screen bg-gray-50 flex items-center justify-center p-4 font-sans">
    <div class="w-full max-w-md bg-white rounded-xl shadow-lg p-6 md:p-8">
        <h2 class="text-2xl font-bold text-center text-gray-800 mb-8">实时色温对照</h2>

        <div id="colorDisplay" class="color-display bg-white mb-8 border border-black/10">
                <span class="text-gray-600">当前色温：</span>
                <span id="temperatureValue" class="text-black font-semibold text-xl">5000K</span>
        </div>



        <div class="px-2">
            <input type="range" id="temperatureSlider" min="1000" max="10000" value="5000"
                class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer">
        </div>

        <div class="flex justify-between text-xs text-gray-500 mt-2 px-1">
            <span>1000K (暖色)</span>
            <span>10000K (冷色)</span>
        </div>

<p class=" text-xs opacity-10 pt-4">色温真实算法依据：https://tannerhelland.com/2012/09/18/convert-temperature-rgb-algorithm-code.html</p>
    </div>
                <a href="https://jackcring.com" target="_blank" class=" fixed  bottom-4 right-4 flex  text-2xl">
                    
                    <svg width="256" height="256" viewBox="0 0 256 256" fill="none" xmlns="http://www.w3.org/2000/svg"
                    class="w-8 h-8 cursor-pointer aspect-square rounded-full opacity-10 hover:opacity-100"
                    >
                        <g clip-path="url(#clip0_15_98)">
                            <mask id="mask0_15_98" style="mask-type:luminance" maskUnits="userSpaceOnUse" x="0" y="0" width="256"
                                height="256">
                                <path d="M256 0H0V256H256V0Z" fill="white" />
                            </mask>
                            <g mask="url(#mask0_15_98)">
                                <path fill-rule="evenodd" clip-rule="evenodd"
                                    d="M256 0H0V256H256V0ZM128.005 81C134.108 81.0028 139.974 83.3661 144.375 87.5952C148.775 91.8243 151.37 97.5916 151.615 103.69C151.615 103.955 151.72 104.21 151.908 104.397C152.095 104.585 152.35 104.69 152.615 104.69H170.265C170.372 104.687 170.474 104.643 170.548 104.566C170.623 104.49 170.665 104.387 170.665 104.28C170.567 93.031 166.029 82.2761 158.039 74.3573C150.049 66.4384 139.254 61.9969 128.005 62C116.757 61.9943 105.963 66.4318 97.971 74.3467C89.9794 82.2615 85.4378 93.0128 85.335 104.26C85.335 104.369 85.3782 104.473 85.455 104.55C85.5319 104.627 85.6362 104.67 85.745 104.67H103.395C103.66 104.67 103.915 104.565 104.102 104.377C104.29 104.19 104.395 103.935 104.395 103.67C104.657 97.5793 107.258 91.8242 111.655 87.6019C116.053 83.3795 121.909 81.0149 128.005 81ZM151.625 150.12C151.625 163.3 140.845 174.46 127.625 174.27C121.419 174.181 115.497 171.653 111.139 167.234C106.781 162.814 104.337 156.857 104.335 150.65V129.23C104.335 128.965 104.23 128.711 104.042 128.523C103.855 128.335 103.6 128.23 103.335 128.23H85.735C85.6289 128.23 85.5271 128.272 85.4521 128.347C85.3771 128.422 85.335 128.524 85.335 128.63V150.63C85.3323 156.234 86.4343 161.783 88.5779 166.961C90.7214 172.138 93.8645 176.843 97.8275 180.805C101.79 184.767 106.495 187.909 111.674 190.051C116.852 192.193 122.401 193.294 128.005 193.29C133.606 193.293 139.153 192.192 144.329 190.05C149.504 187.908 154.207 184.768 158.169 180.808C162.131 176.848 165.273 172.147 167.417 166.972C169.561 161.798 170.665 156.251 170.665 150.65V116.65C170.666 116.597 170.657 116.545 170.637 116.495C170.629 116.474 170.619 116.454 170.607 116.435C170.591 116.409 170.572 116.386 170.551 116.364C170.513 116.327 170.469 116.297 170.42 116.278C170.371 116.258 170.318 116.249 170.265 116.25H152.625C152.36 116.25 152.105 116.355 151.918 116.543C151.73 116.731 151.625 116.985 151.625 117.25V150.12Z"
                                    fill="black" />
                            </g>
                        </g>
                        <defs>
                            <clipPath id="clip0_15_98">
                                <rect width="256" height="256" fill="white" />
                            </clipPath>
                        </defs>
                    </svg>

                </a>


    <script>
        const slider = document.getElementById('temperatureSlider');
        const colorDisplay = document.getElementById('colorDisplay');
        const temperatureValue = document.getElementById('temperatureValue');

        updateColor(5000);

        slider.addEventListener('input', function () {
            const temperature = parseInt(this.value);
            updateColor(temperature);
        });

        function updateColor(temperature) {
            temperatureValue.textContent = `${temperature}K`;

            // 将色温(K)转换为RGB颜色
            // 算法参考: https://tannerhelland.com/2012/09/18/convert-temperature-rgb-algorithm-code.html
            let red, green, blue;
            const temp = temperature / 100;

            if (temp <= 66) {
                red = 255;
            } else {
                red = temp - 60;
                red = 329.698727446 * Math.pow(red, -0.1332047592);
                red = Math.min(red, 255);
            }

            // 计算绿色分量
            if (temp <= 66) {
                green = temp;
                green = 99.4708025861 * Math.log(green) - 161.1195681661;
            } else {
                green = temp - 60;
                green = 288.1221695283 * Math.pow(green, -0.0755148492);
            }
            green = Math.max(0, Math.min(green, 255));

            if (temp >= 66) {
                blue = 255;
            } else if (temp <= 19) {
                blue = 0;
            } else {
                blue = temp - 10;
                blue = 138.5177312231 * Math.log(blue) - 305.0447927307;
                blue = Math.max(0, Math.min(blue, 255));
            }

            const rgbColor = `rgb(${Math.round(red)}, ${Math.round(green)}, ${Math.round(blue)})`;

            colorDisplay.style.backgroundColor = rgbColor;

            const luminance = (0.299 * red + 0.587 * green + 0.114 * blue) / 255;
            colorDisplay.style.color = luminance > 0.5 ? '#333333' : '#FFFFFF';
        }

        const style = document.createElement('style');
        style.textContent = `
            #temperatureSlider::-webkit-slider-thumb {
                @apply slider-thumb;
            }
            #temperatureSlider::-moz-range-thumb {
                @apply slider-thumb;
            }
        `;
        document.head.appendChild(style);
    </script>
</body>

</html>